@if (TempData["message"] != null)
{
    <div class="alert @ViewBag.Alert p-3 rounded-3 text-center mb-5">
        @ViewBag.Message
    </div>
}

<br />

<div>
    <div class="row">
        @foreach (var cart in ViewBag.Carts)
        {
            <div class="col-4 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h3 class="card-title">Cart ID: @cart.CartId</h3>

                        <p><i class="bi bi-person"></i> Created by: @cart.User.UserName</p>
                        <p><i class="bi bi-key"></i> User ID: @cart.UserId</p>

                        <h6>Products in Cart:</h6>
                        @if (cart.CartProducts != null )
                        {
                            <div class="d-flex flex-column gap-2">
                                @foreach (var cartProduct in cart.CartProducts)
                                {
                                    <div>
                                        <p class="mb-1">Product ID: @cartProduct.ProductId</p>
                                        <p class="mb-1">Quantity: @cartProduct.Quantity</p> 
                                        <div class="d-flex flex-column gap-1">
                                            <a asp-controller="Products" asp-action="Show" asp-route-id="@cartProduct.ProductId"
                                               class="btn btn-sm"
                                               style="background-color: #5ba4ff; color: white; border: none; width: 100%;">
                                                <i class="bi bi-eye"></i> View Product Details
                                            </a>
                                        </div>
                                    </div>
                                }
                            </div>
                        }
                        else
                        {
                            <p>No products in this cart.</p>
                        }

                        <div class="mt-3">
                            <a asp-controller="Carts" asp-action="ShowById" asp-route-id="@cart.CartId"
                               class="btn btn-sm w-100"
                               style="background-color:#A74DBA; color: white; border: none;">
                                <i class="bi bi-box"></i> View Cart Details
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
</div>
